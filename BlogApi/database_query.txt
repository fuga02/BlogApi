CREATE  MATERIALIZED VIEW users AS SELECT * FROM "Users" WITH DATA;
REFRESH MATERIALIZED VIEW users;

CREATE or REPLACE FUNCTION on_update_user()
RETURNS TRIGGER
LANGUAGE PLPGSQL
AS
$$
BEGIN
    REFRESH MATERIALIZED VIEW users;
    RETURN NEW ;
END
$$;

CREATE TRIGGER on_update_user_trigger
AFTER UPDATE ON "Users"
FOR EACH ROW
EXECUTE FUNCTION on_update_user();



